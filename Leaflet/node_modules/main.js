// 指定圆心的经纬度，这里以北京为例
var center = [39.9, 116.4];

// 创建地图实例并设置视图到圆心位置
var map = L.map('map').setView(center, 13);

// 添加瓦片图层到地图上
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
}).addTo(map);

// // 创建一个圆形缓冲区
// var circle = L.circle(center, {
//     color: 'blue',     // 圆边界颜色
//     fillColor: '#blue', // 圆填充颜色
//     fillOpacity: 0.5,   // 填充的透明度
//     radius: 1000       // 半径（以米为单位）
// }).addTo(map);

// // （可选）当用户点击圆时显示一个弹窗
// circle.bindPopup("这是一个1公里的圆形缓冲区。");

var popup = L.popup();

function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(map);
}

map.on('click', onMapClick);


var geojsonFeature = {
    "type": "Feature",
    "properties": {
        "name": "Coors Field",
    },
    "geometry": {
        "type": "Point",
        "coordinates": [116.391252, 39.907345]
        // 在geojson中顺序为[经度，纬度]
    }
};

var geojsonMarkerOptions = {
    radius: 8,
    fillColor: "#ff7800",
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
};

L.geoJSON(geojsonFeature, {
    pointToLayer: function(feature, latlng) {
        return L.circleMarker(latlng, geojsonMarkerOptions);
    }
}).addTo(map);


var geojsonLineFeature = {
    "type": "Feature",
    "properties": {
        "name": "line",
    },
    "geometry": {
        "type": "LineString",
        "coordinates":  [[116.383324, 39.903086], 
        [116.388988, 39.90256], [116.397743, 39.898938], [116.385813, 39.894263]]
    }
};

var myStyle = {
    "color": "#ff7800",
    "weight": 5,
    "opacity": 0.65
};

L.geoJSON(geojsonLineFeature, {
    style:myStyle
}).addTo(map);